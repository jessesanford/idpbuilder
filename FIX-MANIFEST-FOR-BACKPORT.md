# Fix Manifest for Backport Planning

## Integration Context
- **Phase**: 2
- **Wave**: 1
- **Integration Branch**: idpbuilderpush/phase2/wave1/integration
- **Integration Status**: Build SUCCESS, Tests FAILING (expected TDD state)
- **Date**: 2025-09-24

## Integration Test Failures (TDD GREEN Phase)
The following constructor functions are defined in tests but need implementation:

### Authentication Constructor Functions
From `pkg/oci/auth_test.go`, the following functions are undefined:

1. **NewAuthenticatorFromSecrets**
   - Line: pkg/oci/auth_test.go:53:17
   - Purpose: Create authenticator from Kubernetes secrets
   - Expected signature: Should accept secret data and return Authenticator

2. **NewAuthenticatorFromFlags**
   - Line: pkg/oci/auth_test.go:101:17
   - Purpose: Create authenticator from CLI flags
   - Expected signature: Should accept username/password flags

3. **NewAuthenticatorFromEnv**
   - Line: pkg/oci/auth_test.go:122:16
   - Purpose: Create authenticator from environment variables
   - Expected signature: Should read OCI_USERNAME/OCI_PASSWORD env vars

## Affected Effort Branches

### Effort 2.1.2: Auth Implementation
- **Branch**: idpbuilderpush/phase2/wave1/auth-implementation
- **Files to Modify**: pkg/oci/auth.go
- **Required Functions**: All three constructor functions
- **Current Status**: Basic auth structure exists, constructors missing

## Source Files Analysis

### Files in Integration That Need Updates
1. **pkg/oci/auth.go** (from auth-implementation effort)
   - Has basic Authenticator interface and structure
   - Missing: Constructor functions
   - Size: 5603 bytes

2. **pkg/oci/auth_test.go** (from auth-interface-tests effort)
   - Defines expected behavior for constructors
   - Size: 9822 bytes
   - Contains comprehensive tests waiting for implementation

## Required Backports

### Priority 1: Constructor Functions Implementation
The auth-implementation branch needs these constructor functions added to `pkg/oci/auth.go`:

```go
// These functions need to be implemented in pkg/oci/auth.go:
func NewAuthenticatorFromSecrets(secretData map[string][]byte) (*Authenticator, error)
func NewAuthenticatorFromFlags(username, password string) (*Authenticator, error)
func NewAuthenticatorFromEnv() (*Authenticator, error)
```

## Test Coverage Requirements
The tests in auth_test.go expect:
- Proper error handling for invalid inputs
- Environment variable reading (OCI_USERNAME, OCI_PASSWORD)
- Secret data parsing
- Flag validation

## Build Status After Fixes
Once constructor functions are implemented:
- Build should continue to pass
- Tests should start passing (TDD GREEN → RED → GREEN cycle)
- No breaking changes to existing interfaces

## Verification Steps
1. After implementing constructors in auth-implementation branch:
   - Run: `go build ./pkg/oci/...`
   - Run: `go test ./pkg/oci/...`
2. Tests should pass or show meaningful progress
3. No regression in existing functionality

## Dependencies and Order
1. Fix auth-implementation branch FIRST (add constructors)
2. No changes needed to auth-interface-tests (tests are correct)
3. No changes needed to auth-mocks (mocks are separate)

## Special Considerations
- This is TDD GREEN phase - tests were written first
- Constructor implementations should match test expectations
- Maintain backward compatibility with any existing code
- Follow existing patterns in the codebase

## Success Criteria
- All three constructor functions implemented
- Build succeeds without errors
- Test failures change from "undefined" to actual test assertions
- No deletions of existing code (R359 compliance)
- Implementation stays within size limits (R304 compliance)

---
*Generated by Orchestrator for Code Reviewer Backport Planning*
*Date: 2025-09-24*