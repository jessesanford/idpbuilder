# SOFTWARE FACTORY MANAGER TODOs
## Session: TESTING - 2025-08-26 20:03:00

## COMPLETED (7 items)
✓ Review and migrate rules from CRITICAL folder to rule-library
✓ Create R021 supreme law to prevent orchestrator stopping  
✓ Fix line counter usage in sparse clones (R198 and R022)
✓ Implement transcript-based agent identification
✓ Fix PreCompact hook to extract transcript from JSON payload
✓ Update PreCompact to use CLAUDE_PROJECT_DIR for todos
✓ Successfully tested compaction recovery mechanism

## IN PROGRESS (1 item)
→ Test compaction recovery with multi-agent scenarios
  - Testing how PreCompact extracts transcript_path from JSON
  - Verifying TODO files are found using CLAUDE_PROJECT_DIR
  - Confirming transcript-based markers work correctly

## PENDING (3 items)
- Document transcript-based recovery system
- Create integration tests for hook system
- Update all agent configs with new rules

## CONTEXT NOTES
- Fixed PreCompact to read JSON from stdin (hooks receive events this way)
- Now using $CLAUDE_PROJECT_DIR/todos for TODO discovery
- Transcript-based identification enables multi-agent safety
- Recovery system tested and working with improved hooks

## KEY FILES MODIFIED
- /workspaces/software-factory-2.0-template/utilities/transcript-based-precompact.sh
- /workspaces/software-factory-2.0-template/.claude/settings.json
- Multiple rule files in rule-library (R021, R022, R198, etc.)

## RECOVERY TEST STATUS
Ready for compaction test with proper JSON extraction and CLAUDE_PROJECT_DIR usage